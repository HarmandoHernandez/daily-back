"use strict";(self.webpackChunkdaily_front=self.webpackChunkdaily_front||[]).push([[388],{388:(O,v,a)=>{a.r(v),a.d(v,{LocalModule:()=>J});var u=a(9808),l=a(6010),d=a(7194),i=a(1223),p=a(108);let y=(()=>{class e{constructor(){this.ROUTINE_NAME="routine"}get routine(){var t;const o=JSON.parse(null!==(t=localStorage.getItem(this.ROUTINE_NAME))&&void 0!==t?t:"[]");return this.orderByStartTime(o)}findActivity(t){return this.routine.find(o=>o.id===t)}addActivity(t){t.id=this.newId;const o=this.routine;return o.push(t),this.saveRoutine(o),t}updateActivity(t){const o=this.routine,n=o.findIndex(r=>r.id===t.id);return-1!==n?(o[n]=t,this.saveRoutine(o),t):new p.c("","","","",0)}removeActivity(t){const o=this.routine.filter(n=>n.id!==t);this.saveRoutine(o)}saveRoutine(t){localStorage.setItem(this.ROUTINE_NAME,JSON.stringify(t))}get newId(){const t=this.routine.map(n=>Number(n.id));return 0===t.length?"1":(Math.max(...t)+1).toString()}orderByStartTime(t){return t.sort((o,n)=>{var r,s;const m=null===(r=o.startTime)||void 0===r?void 0:r.split(":"),h=Number(m[0]),f=Number(m[1]),A=null===(s=n.startTime)||void 0===s?void 0:s.split(":"),_=Number(A[0]),g=Number(A[1]);return h>_?1:h<_?-1:f>g?1:f<g?-1:0}),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var E=a(5700),L=a(5817);let C=(()=>{class e{constructor(t,o,n){this.route=t,this.router=o,this.localService=n,this.routine=[]}ngOnInit(){this.routine=this.localService.routine}showActivity(t){this.router.navigate([`activity/${t}`],{relativeTo:this.route})}clickEventAdd(){this.router.navigate([`activity/${d.e.NEW}`],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(l.gz),i.Y36(l.F0),i.Y36(y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["local-routine"]],decls:2,vars:1,consts:[[3,"routine","activityId"],["title","Add Activity","color","#00b894",3,"clickEvent"]],template:function(t,o){1&t&&(i.TgZ(0,"app-routine",0),i.NdJ("activityId",function(r){return o.showActivity(r)}),i.qZA(),i.TgZ(1,"util-btn",1),i.NdJ("clickEvent",function(){return o.clickEventAdd()}),i.qZA()),2&t&&i.Q6J("routine",o.routine)},directives:[E.l,L.H],encapsulation:2}),e})();var T=a(3900),I=a(2856);function S(e,c){if(1&e){const t=i.EpF();i.TgZ(0,"app-activity",2),i.NdJ("deleteEvent",function(n){return i.CHM(t),i.oxw().deleteActivity(n)})("updateEvent",function(n){return i.CHM(t),i.oxw().updateActivity(n)})("addEvent",function(n){return i.CHM(t),i.oxw().addActivity(n)})("closeEvent",function(){return i.CHM(t),i.oxw().closeActivity()}),i.qZA()}if(2&e){const t=i.oxw();i.Q6J("activity",t.activity)}}function M(e,c){1&e&&(i.TgZ(0,"div",3),i._uU(1,"Activity not found."),i.qZA())}const N=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-local"]],decls:2,vars:0,consts:[[1,"content"]],template:function(t,o){1&t&&(i.TgZ(0,"div",0),i._UZ(1,"router-outlet"),i.qZA())},directives:[l.lC],encapsulation:2}),e})(),children:[{path:"",component:C},{path:"activity/:id",component:(()=>{class e{constructor(t,o,n){this.route=t,this.router=o,this.localService=n,this.initialActivity=new p.c("","","","00:00",5),this.hadActivity=!1,this.activityId=""}ngOnInit(){this.route.paramMap.pipe((0,T.w)(t=>{var o;return this.activityId=null!==(o=t.get("id"))&&void 0!==o?o:"",this.evalActivity(),this.activityId})).subscribe()}evalActivity(){var t;if(this.activityId===d.e.NEW)this.setActivityData(this.initialActivity,!0);else{const o=null!==(t=this.localService.findActivity(this.activityId))&&void 0!==t?t:this.initialActivity;this.setActivityData(o)}}setActivityData(t,o=!1){this.activity=t,this.hadActivity=Boolean(t.id)||o}deleteActivity(t){this.localService.removeActivity(t)}updateActivity(t){this.localService.updateActivity(t)}addActivity(t){const o=this.localService.addActivity(t);this.router.navigate([`local/activity/${o.id}`])}closeActivity(){this.router.navigate(["local"])}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(l.gz),i.Y36(l.F0),i.Y36(y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["local-activity"]],decls:3,vars:2,consts:[[3,"activity","deleteEvent","updateEvent","addEvent","closeEvent",4,"ngIf","ngIfElse"],["nofound",""],[3,"activity","deleteEvent","updateEvent","addEvent","closeEvent"],[1,"alert__nofound"]],template:function(t,o){if(1&t&&(i.YNc(0,S,1,1,"app-activity",0),i.YNc(1,M,2,0,"ng-template",null,1,i.W1O)),2&t){const n=i.MAs(2);i.Q6J("ngIf",o.hadActivity)("ngIfElse",n)}},directives:[u.O5,I.y],styles:[".alert__nofound[_ngcontent-%COMP%]{padding:2em}"]}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}]}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[l.Bz.forChild(N)],l.Bz]}),e})();var R=a(5784),Z=a(4603);let J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[u.ez,x,R.N,Z.A]]}),e})()}}]);