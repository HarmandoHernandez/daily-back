"use strict";(self.webpackChunkdaily_front=self.webpackChunkdaily_front||[]).push([[862],{8862:(mt,C,d)=>{d.r(C),d.d(C,{LocalModule:()=>st});var p=d(9808),_=d(6010),a=(()=>{return(e=a||(a={})).NEW="new",e.VIEW="view",e.EDIT="edit",e.DELETE="delete",a;var e})(),t=d(1223);class A{constructor(c,i,n,o,r){this.id=c,this.icon=i,this.title=n,this.startTime=o,this.durationTime=r}}let x=(()=>{class e{constructor(){this.ROUTINE_NAME="routine"}get routine(){var i;const n=JSON.parse(null!==(i=localStorage.getItem(this.ROUTINE_NAME))&&void 0!==i?i:"[]");return this.orderByStartTime(n)}findActivity(i){return this.routine.find(n=>n.id===i)}addActivity(i){i.id=this.newId;const n=this.routine;return n.push(i),this.saveRoutine(n),i}updateActivity(i){const n=this.routine,o=n.findIndex(r=>r.id===i.id);return-1!==o?(n[o]=i,this.saveRoutine(n),i):new A("","","","",0)}removeActivity(i){const n=this.routine.filter(o=>o.id!==i);this.saveRoutine(n)}saveRoutine(i){localStorage.setItem(this.ROUTINE_NAME,JSON.stringify(i))}get newId(){const i=this.routine.map(o=>Number(o.id));return 0===i.length?"1":(Math.max(...i)+1).toString()}orderByStartTime(i){return i.sort((n,o)=>{var r,s;const u=null===(r=n.startTime)||void 0===r?void 0:r.split(":"),v=Number(u[0]),h=Number(u[1]),f=null===(s=o.startTime)||void 0===s?void 0:s.split(":"),y=Number(f[0]),g=Number(f[1]);return v>y?1:v<y?-1:h>g?1:h<g?-1:0}),i}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var L=d(8421),O=d(8306),k=d(5577),N=d(1144),m=d(576),J=d(3268);const D=["addListener","removeListener"],F=["addEventListener","removeEventListener"],S=["on","off"];function E(e,c,i,n){if((0,m.m)(i)&&(n=i,i=void 0),n)return E(e,c,i).pipe((0,J.Z)(n));const[o,r]=function R(e){return(0,m.m)(e.addEventListener)&&(0,m.m)(e.removeEventListener)}(e)?F.map(s=>u=>e[s](c,u,i)):function V(e){return(0,m.m)(e.addListener)&&(0,m.m)(e.removeListener)}(e)?D.map(b(e,c)):function q(e){return(0,m.m)(e.on)&&(0,m.m)(e.off)}(e)?S.map(b(e,c)):[];if(!o&&(0,N.z)(e))return(0,k.z)(s=>E(s,c,i))((0,L.Xf)(e));if(!o)throw new TypeError("Invalid event target");return new O.y(s=>{const u=(...v)=>s.next(1<v.length?v:v[0]);return o(u),()=>r(u)})}function b(e,c){return i=>n=>e[i](c,n)}function U(e,c){if(1&e&&(t.TgZ(0,"li",2),t.TgZ(1,"span",3),t._uU(2),t.qZA(),t.TgZ(3,"p",4),t._uU(4),t.qZA(),t.TgZ(5,"p",5),t._uU(6),t.qZA(),t.qZA()),2&e){const i=c.$implicit;t.s9C("id",i.id),t.xp6(2),t.Oqu(i.icon),t.xp6(2),t.Oqu(i.title),t.xp6(2),t.AsE(" ",i.startTime," \xb7 ",i.durationTime," ")}}let Q=(()=>{class e{constructor(){this.routine=[],this.activityId=new t.vpe}ngOnInit(){this.currentTime(this.routine),setInterval(this.currentTime.bind(this,this.routine),1e3)}ngAfterViewInit(){E(document.getElementById("routine"),"click").subscribe(o=>{"UL"!==o.target.nodeName&&this.activityId.emit(o.target.id)})}currentTime(i=[]){const n=new Date,o={date:n,month:n.getMonth(),day:n.getDate(),year:n.getFullYear()},r=i.filter(u=>this.identifyActivity(u,o));if(void 0===r[0])return;const s=document.getElementById(r[0].id);null!=s&&s.classList.add("activity--active")}identifyActivity(i,n){var o;const{date:r,month:s,day:u,year:v}=n,h=null===(o=i.startTime)||void 0===o?void 0:o.split(":"),f=Number(h[0]),y=Number(h[1]),Z=this.calcTime(i.durationTime+y),dt=new Date(v,s,u,f,y,0,0),ut=new Date(v,s,u,Z.hours+f,Z.min,0,0),vt=r.getTime()>dt.getTime();return r.getTime()<ut.getTime()&&vt}calcTime(i){let n=0;for(;i>59;)i-=60,n++;return{hours:n,min:i}}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-routine"]],inputs:{routine:"routine"},outputs:{activityId:"activityId"},decls:2,vars:1,consts:[["id","routine",1,"routine"],["class","activity",3,"id",4,"ngFor","ngForOf"],[1,"activity",3,"id"],[1,"activity__icon"],[1,"activity__title"],[1,"activity__time"]],template:function(i,n){1&i&&(t.TgZ(0,"ul",0),t.YNc(1,U,7,5,"li",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngForOf",n.routine))},directives:[p.sg],styles:[".routine[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1em;padding:0;list-style:none}.activity[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1em;min-width:230px;width:80%;padding:0 1em;box-sizing:border-box;box-shadow:0 0 5px #0003;border-radius:5px;cursor:pointer}.activity[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px 2px #0003}.activity--active[_ngcontent-%COMP%]{width:100%;background-color:var(--active-color)}.activity__icon[_ngcontent-%COMP%], .activity__title[_ngcontent-%COMP%], .activity__time[_ngcontent-%COMP%]{text-decoration:none;line-height:1.5em;font-size:var(--font-size-caption);color:var(--black-color);pointer-events:none}.activity__icon[_ngcontent-%COMP%]{border-radius:50%}.activity__title[_ngcontent-%COMP%]{flex-grow:1;padding:0 .5em}"]}),e})();var w=d(5817);let Y=(()=>{class e{constructor(i,n,o){this.route=i,this.router=n,this.localService=o,this.routine=[]}ngOnInit(){this.routine=this.localService.routine}showActivity(i){this.router.navigate([`activity/${i}`],{relativeTo:this.route})}clickEventAdd(){this.router.navigate([`activity/${a.NEW}`],{relativeTo:this.route})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(_.gz),t.Y36(_.F0),t.Y36(x))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-local-routine"]],decls:3,vars:1,consts:[[1,"local__routine"],[3,"routine","activityId"],["title","Add Activity","color","#00b894",3,"clickEvent"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"app-routine",1),t.NdJ("activityId",function(r){return n.showActivity(r)}),t.qZA(),t.TgZ(2,"util-btn",2),t.NdJ("clickEvent",function(){return n.clickEventAdd()}),t.qZA(),t.qZA()),2&i&&(t.xp6(1),t.Q6J("routine",n.routine))},directives:[Q,w.H],styles:[".local__routine[_ngcontent-%COMP%]{width:100%;max-width:var(--max-with-routine-view);margin:0 auto;text-align:center;align-items:center}"]}),e})();var P=d(3900),l=d(2382),W=d(1135);class M{constructor(c,i,n){this.title=c,this.body=i,this.actions=n}}class T{constructor(c,i,n){this.id=c,this.title=i,this.color=n}}var H=d(1779);function z(e,c){if(1&e){const i=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){const r=t.CHM(i).$implicit;return t.oxw().click(r.id)}),t._uU(1),t.qZA()}if(2&e){const i=c.$implicit;t.Q6J("color",i.color),t.xp6(1),t.hij(" ",i.title," ")}}let B=(()=>{class e{constructor(){this.initialData=new M("Title","This is the description description description description description description description description",[new T("id","Title button","#e17055")]),this.data=this.initialData,this.clickEvent=new t.vpe}ngOnInit(){}click(i){this.clickEvent.emit(i)}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["util-modal"]],inputs:{data:"data"},outputs:{clickEvent:"clickEvent"},decls:7,vars:3,consts:[[1,"modal"],[1,"body"],[1,"title"],[1,"description"],["class","btn",3,"color","click",4,"ngFor","ngForOf"],[1,"btn",3,"color","click"]],template:function(i,n){1&i&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.qZA(),t.TgZ(4,"p",3),t._uU(5),t.qZA(),t.YNc(6,z,2,2,"button",4),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(n.data.title),t.xp6(2),t.Oqu(n.data.body),t.xp6(1),t.Q6J("ngForOf",n.data.actions))},directives:[p.sg,H.Q],styles:[".modal[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex;align-items:center;justify-content:center;width:100vw;height:100vh;z-index:9999;background-color:#3535356e}.body[_ngcontent-%COMP%]{max-width:var(--max-with-routine-view);padding:1em;border-radius:4px;background-color:#f0f8ff;box-shadow:0 0 10px 2px #0000004d}.title[_ngcontent-%COMP%]{margin:0}.description[_ngcontent-%COMP%]{font-size:.9em;line-height:1.5em}.btn[_ngcontent-%COMP%]{width:max-content;max-width:300px;padding:.5em;margin:10px;cursor:pointer;border-radius:4px;border:2px solid transparent;transition:border-color .4s ease-in-out;font-size:.9em}.btn[_ngcontent-%COMP%]:hover{border-color:#1e1e1e99}"]}),e})();function j(e,c){1&e&&(t.TgZ(0,"div",16),t._uU(1," The icon is required and must be max 5 characters. "),t.qZA())}function X(e,c){1&e&&(t.TgZ(0,"div",16),t._uU(1," The icon is required and must be between 3 and 25 characters. "),t.qZA())}function $(e,c){1&e&&(t.TgZ(0,"div",16),t._uU(1," The duration must be between 5 and 1440 minutes. "),t.qZA())}function G(e,c){1&e&&t._UZ(0,"div")}function K(e,c){if(1&e){const i=t.EpF();t._UZ(0,"button",17,18),t.TgZ(2,"util-btn",19),t.NdJ("clickEvent",function(){return t.CHM(i),t.MAs(1).click()}),t.qZA(),t.TgZ(3,"util-btn",20),t.NdJ("clickEvent",function(){return t.CHM(i),t.oxw().cancelOperation()}),t.qZA()}if(2&e){const i=t.oxw();t.xp6(2),t.Q6J("color",i.btnSaveColor),t.xp6(1),t.Q6J("color",i.btnCancelColor)}}function tt(e,c){if(1&e){const i=t.EpF();t.TgZ(0,"util-btn",21),t.NdJ("clickEvent",function(){return t.CHM(i),t.oxw().editActivity()}),t.qZA(),t.TgZ(1,"util-btn",22),t.NdJ("clickEvent",function(){return t.CHM(i),t.oxw().toggleModal()}),t.qZA()}if(2&e){const i=t.oxw();t.Q6J("color",i.btnEditColor),t.xp6(1),t.Q6J("color",i.btnDeleteColor)}}function it(e,c){if(1&e){const i=t.EpF();t.TgZ(0,"util-btn",23),t.NdJ("clickEvent",function(){return t.CHM(i),t.oxw().closeView()}),t.qZA()}if(2&e){const i=t.oxw();t.Q6J("color",i.btnCloseColor)}}function et(e,c){if(1&e){const i=t.EpF();t.TgZ(0,"util-modal",24),t.NdJ("clickEvent",function(o){return t.CHM(i),t.oxw().clickModal(o)}),t.qZA()}if(2&e){const i=t.oxw();t.Q6J("data",i.deleteModalData)}}let nt=(()=>{class e{constructor(i){this.fb=i,this.deleteModalData=new M("Delete Activity","Are you sure of delete ** activity?",[new T(a.VIEW,"No, cancel","#b2bec3"),new T(a.DELETE,"Yes, delete","#e17055")]),this.btnEditColor="#74b9ff",this.btnDeleteColor="#ff7675",this.btnSaveColor="#00b894",this.btnCancelColor="#fdcb6e",this.btnCloseColor="#ffeaa7",this.deleteEvent=new t.vpe,this.updateEvent=new t.vpe,this.addEvent=new t.vpe,this.closeEvent=new t.vpe,this.actionControl=new W.X(a.VIEW),this.currentAction=a.VIEW,this.activityForm=this.fb.group({id:[""],icon:["",[l.kI.required,l.kI.maxLength(5)]],title:["",[l.kI.required,l.kI.minLength(3),l.kI.maxLength(25)]],startTime:["00:00",l.kI.required],durationTime:[5,[l.kI.min(5),l.kI.max(1440)]]})}set activity(i){void 0!==i&&(this._activity=i,this.evalData(i))}ngOnInit(){this.actionControl.subscribe(i=>{this.currentAction=i})}evalData(i){this.setData(i),""===i.id&&this.actionControl.next(a.NEW)}setData(i){this.activityForm.patchValue({id:i.id,icon:i.icon,title:i.title,startTime:i.startTime,durationTime:i.durationTime})}get isValidFormData(){return!this.activityForm.invalid||(this.activityForm.markAllAsTouched(),!1)}saveChanges(){if(!this.isValidFormData)return;const{id:i,icon:n,title:o,startTime:r,durationTime:s}=this.activityForm.value,u=new A(i,n,o,r,s);this.currentAction===a.EDIT&&this.updateEvent.emit(u),this.currentAction===a.NEW&&this.addEvent.emit(u),this.actionControl.next(a.VIEW)}cancelOperation(){this.currentAction===a.EDIT&&void 0!==this._activity&&(this.setData(this._activity),this.actionControl.next(a.VIEW)),this.currentAction===a.NEW&&this.closeView()}editActivity(){this.actionControl.next(a.EDIT)}deleteActivity(){var i;this.deleteEvent.emit(null===(i=this._activity)||void 0===i?void 0:i.id),this.closeView()}toggleModal(){var i,n;this.deleteModalData.body=this.deleteModalData.body.replace("**",`'${null!==(n=null===(i=this._activity)||void 0===i?void 0:i.title)&&void 0!==n?n:""}'`),this.actionControl.next(a.DELETE)}clickModal(i){i===a.DELETE&&(this.deleteActivity(),this.closeView()),i===a.VIEW&&this.actionControl.next(a.VIEW)}closeView(){this.closeEvent.emit(!0)}ngOnDestroy(){this.actionControl.unsubscribe()}get isActionView(){return this.currentAction===a.VIEW}get isActionDelete(){return this.currentAction===a.DELETE}isValid(i){return null!=this.activityForm.controls[i].errors&&this.activityForm.controls[i].touched}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(l.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-activity"]],inputs:{activity:"activity"},outputs:{deleteEvent:"deleteEvent",updateEvent:"updateEvent",addEvent:"addEvent",closeEvent:"closeEvent"},decls:26,vars:13,consts:[["autocomplete","off",1,"form",3,"formGroup","ngSubmit"],["for","icon",1,"form__label"],["id","icon","type","text","placeholder","\u{1f642}","formControlName","icon",3,"readonly"],["class","invalid__feedback",4,"ngIf"],["for","title",1,"form__label"],["id","title","type","text","formControlName","title","placeholder","breakfast...",3,"readonly"],["for","start",1,"form__label"],["id","start","type","time","formControlName","startTime",3,"readonly"],["for","duration",1,"form__label"],["id","duration","type","number","formControlName","durationTime","min","5","max","1440",3,"readonly"],[1,"form__actions"],[4,"ngIf","ngIfThen","ngIfElse"],["newAndEdit",""],["view",""],["title","Close",3,"color","clickEvent",4,"ngIf"],[3,"data","clickEvent",4,"ngIf"],[1,"invalid__feedback"],["type","submit","hidden",""],["submit",""],["title","Save",3,"color","clickEvent"],["title","Cancel",3,"color","clickEvent"],["title","Edit",3,"color","clickEvent"],["title","Delete",3,"color","clickEvent"],["title","Close",3,"color","clickEvent"],[3,"data","clickEvent"]],template:function(i,n){if(1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.saveChanges()}),t.TgZ(1,"label",1),t._uU(2,"Icon"),t.qZA(),t._UZ(3,"input",2),t.YNc(4,j,2,0,"div",3),t.TgZ(5,"label",4),t._uU(6,"Title"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,X,2,0,"div",3),t.TgZ(9,"label",6),t._uU(10,"Start hour"),t.qZA(),t._UZ(11,"input",7),t.TgZ(12,"label",8),t._uU(13,"Duration (mins)"),t.qZA(),t._UZ(14,"input",9),t.YNc(15,$,2,0,"div",3),t.TgZ(16,"div",10),t.YNc(17,G,1,0,"div",11),t.YNc(18,K,4,2,"ng-template",null,12,t.W1O),t.YNc(20,tt,2,2,"ng-template",null,13,t.W1O),t.qZA(),t.qZA(),t._UZ(22,"br"),t._UZ(23,"br"),t.YNc(24,it,1,1,"util-btn",14),t.YNc(25,et,1,1,"util-modal",15)),2&i){const o=t.MAs(19),r=t.MAs(21);t.Q6J("formGroup",n.activityForm),t.xp6(3),t.Q6J("readonly",n.isActionView),t.xp6(1),t.Q6J("ngIf",n.isValid("icon")),t.xp6(3),t.Q6J("readonly",n.isActionView),t.xp6(1),t.Q6J("ngIf",n.isValid("title")),t.xp6(3),t.Q6J("readonly",n.isActionView),t.xp6(3),t.Q6J("readonly",n.isActionView),t.xp6(1),t.Q6J("ngIf",n.isValid("durationTime")),t.xp6(2),t.Q6J("ngIf",n.isActionView)("ngIfThen",r)("ngIfElse",o),t.xp6(7),t.Q6J("ngIf",n.isActionView),t.xp6(1),t.Q6J("ngIf",n.isActionDelete)}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,p.O5,l.wV,l.qQ,l.Fd,w.H,B],encapsulation:2}),e})();function ot(e,c){if(1&e){const i=t.EpF();t.TgZ(0,"app-activity",3),t.NdJ("deleteEvent",function(o){return t.CHM(i),t.oxw().deleteActivity(o)})("updateEvent",function(o){return t.CHM(i),t.oxw().updateActivity(o)})("addEvent",function(o){return t.CHM(i),t.oxw().addActivity(o)})("closeEvent",function(){return t.CHM(i),t.oxw().closeActivity()}),t.qZA()}if(2&e){const i=t.oxw();t.Q6J("activity",i.activity)}}function ct(e,c){1&e&&(t.TgZ(0,"div",4),t._uU(1,"Activity not found."),t.qZA())}const rt=[{path:"",children:[{path:"",component:Y},{path:"activity/:id",component:(()=>{class e{constructor(i,n,o){this.route=i,this.router=n,this.localService=o,this.initialActivity=new A("","","","00:00",5),this.hadActivity=!1,this.activityId=""}ngOnInit(){this.route.paramMap.pipe((0,P.w)(i=>{var n;return this.activityId=null!==(n=i.get("id"))&&void 0!==n?n:"",this.evalActivity(),this.activityId})).subscribe()}evalActivity(){var i;if(this.activityId===a.NEW)this.setActivityData(this.initialActivity,!0);else{const n=null!==(i=this.localService.findActivity(this.activityId))&&void 0!==i?i:this.initialActivity;this.setActivityData(n)}}setActivityData(i,n=!1){this.activity=i,this.hadActivity=Boolean(i.id)||n}deleteActivity(i){this.localService.removeActivity(i)}updateActivity(i){this.localService.updateActivity(i)}addActivity(i){const n=this.localService.addActivity(i);this.router.navigate([`local/activity/${n.id}`])}closeActivity(){this.router.navigate(["local"])}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(_.gz),t.Y36(_.F0),t.Y36(x))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-local-activity"]],decls:4,vars:2,consts:[[1,"local__activity"],[3,"activity","deleteEvent","updateEvent","addEvent","closeEvent",4,"ngIf","ngIfElse"],["nofound",""],[3,"activity","deleteEvent","updateEvent","addEvent","closeEvent"],[1,"alert__nofound"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0),t.YNc(1,ot,1,1,"app-activity",1),t.YNc(2,ct,2,0,"ng-template",null,2,t.W1O),t.qZA()),2&i){const o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.hadActivity)("ngIfElse",o)}},directives:[p.O5,nt],styles:[".local__activity[_ngcontent-%COMP%]{width:max-content;max-width:var(--max-with-routine-view);margin:0 auto;text-align:center}.alert__nofound[_ngcontent-%COMP%]{padding:2em}"]}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}]}];let at=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[_.Bz.forChild(rt)],_.Bz]}),e})();var I=d(4603);let lt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,l.UX,I.A]]}),e})(),st=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,at,lt,I.A]]}),e})()}}]);